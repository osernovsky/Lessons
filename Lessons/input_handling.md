
# Урок: Ввод данных в языке C

## 1. Введение

Ввод данных от пользователя – одна из важных частей программирования. В языке **C** существуют несколько функций для ввода данных, и каждая из них имеет свои особенности. Этот урок объяснит, **когда использовать** и **как правильно обрабатывать ввод**, чтобы избежать ошибок, связанных с символами **новой строки (`\n`)** и пробелами.

---

## 2. Основные функции для ввода данных

### 2.1. `scanf()` – Ввод чисел и простых строк

Функция **`scanf()`** используется для ввода значений **разных типов данных**. Она останавливает ввод при встрече **пробела** или **новой строки**, что делает её не лучшим выбором для ввода многословных строк.

#### Синтаксис:
```c
scanf("формат", &переменная);
```

#### Пример:
```c
int age;
printf("Введите возраст: ");
scanf("%d", &age);
printf("Ваш возраст: %d\n", age);
```
**Важно:** При использовании `scanf()` необходимо передавать **адрес переменной** с помощью `&`.

### 2.2. Ограничения `scanf()`:
- Останавливается на **пробелах**.
- Проблемы с обработкой символа **`\n`** (новой строки) могут возникнуть, если вводить данные подряд.
- **Не удаляет `\n`** из буфера ввода, что приводит к ошибкам при последующем вводе.

---

## 3. Проблема символа новой строки (`\n`)

Когда вводится значение с помощью **`scanf()`**, нажатие клавиши Enter добавляет символ **`\n`** в буфер. Если этот символ не удалить, следующий ввод (например, строка через **`fgets()`**) **сразу завершится**.

### Как убрать `\n`:
Используйте цикл для очистки буфера:
```c
while (getchar() != '\n');  // Убирает символы до конца строки
```

---

## 4. Ввод строк с пробелами: `fgets()`

Функция **`fgets()`** позволяет вводить строки, содержащие **пробелы**, и защищает от переполнения буфера.

#### Синтаксис:
```c
fgets(переменная, размер, stdin);
```
- **`переменная`** – куда будет записана строка.
- **`размер`** – максимальная длина строки.
- **`stdin`** – стандартный ввод.

#### Пример:
```c
char name[50];
printf("Введите ваше полное имя: ");
fgets(name, sizeof(name), stdin);
printf("Ваше имя: %s", name);
```

**Важно:** `fgets()` сохраняет **символ новой строки `\n`** в конце строки. Его можно удалить вручную:
```c
name[strcspn(name, "\n")] = '\0';  // Убираем \n
```

---

## 5. Сравнение `scanf()` и `fgets()`

| Функция    | Ввод чисел | Ввод строки без пробелов | Ввод строки с пробелами | Обработка `\n` |
|------------|------------|--------------------------|-------------------------|-----------------|
| `scanf()`  | Да         | Да                       | Нет                     | Не удаляет      |
| `fgets()`  | Нет        | Да                       | Да                      | Сохраняет       |

---

## 6. Пример: Объединение `scanf()` и `fgets()`

Если нужно вводить и **числа**, и **строки с пробелами**, важно правильно очищать буфер.

#### Пример:
```c
#include <stdio.h>
#include <string.h>  // Для strcspn()

int main(void) {
    int age;
    char name[50];

    printf("Введите ваш возраст: ");
    scanf("%d", &age);
    while (getchar() != '\n');  // Очищаем буфер ввода

    printf("Введите ваше полное имя: ");
    fgets(name, sizeof(name), stdin);
    name[strcspn(name, "\n")] = '\0';  // Убираем символ новой строки

    printf("Ваш возраст: %d, ваше имя: %s\n", age, name);

    return 0;
}
```

---

## 7. Ввод чисел с плавающей точкой: `scanf()`

Для ввода чисел с плавающей точкой используется формат **`%f`** для `float` и **`%lf`** для `double`.

#### Пример:
```c
float height;
printf("Введите ваш рост: ");
scanf("%f", &height);
printf("Ваш рост: %.2f метра\n", height);
```

---

## 8. Обработка ошибок ввода

### Проверка успешного ввода с `scanf()`:
```c
int age;
if (scanf("%d", &age) != 1) {
    printf("Ошибка: введено некорректное значение.\n");
    return 1;
}
```

### Пример очистки буфера ввода:
```c
int age;
char buffer[50];

printf("Введите возраст: ");
if (fgets(buffer, sizeof(buffer), stdin) != NULL) {
    if (sscanf(buffer, "%d", &age) != 1) {
        printf("Ошибка: некорректный ввод.\n");
        return 1;
    }
}
printf("Ваш возраст: %d\n", age);
```

---

## 9. Заключение

В этом уроке мы рассмотрели:
- Когда использовать **`scanf()`** и **`fgets()`**.
- Как правильно **обрабатывать символ новой строки (`\n`)**.
- Как вводить **числа и строки с пробелами**.
- Как избежать ошибок при вводе.

Теперь вы знаете, как правильно организовать ввод данных в **C** и избегать распространённых ошибок, связанных с буфером ввода.
